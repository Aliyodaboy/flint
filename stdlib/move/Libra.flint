@resource
external trait Libra {
  public func getValue() -> uint64
  public func withdraw(amount: uint64) -> Libra
  public func transfer(to: inout Libra, value: uint64)
}

struct LibraCoin {
  visible var libra: Libra

  public init() {
    libra = Libra(0x0)
  }

  public func balance() -> Int {
    return (call! libra.getValue()) as! Int
  }

  func transfer(to: inout LibraCoin, amount: Int) mutates (value) {
    call! libra.transfer(to: &to.libra, value: (amount as! uint64))
  }
}
